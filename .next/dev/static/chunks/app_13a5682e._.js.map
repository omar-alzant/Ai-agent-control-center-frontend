{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/OMAR/Desktop/ai-agent-control-center/frontend/app/components/ChatInterface.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport { api } from \"../lib/api\"; // Centralized API client\r\n\r\nexport function ChatInterface({ agentId }: { agentId: string }) {\r\n  const [messages, setMessages] = useState<any[]>([]);\r\n  const [input, setInput] = useState('');\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const scrollRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    const loadHistory = async () => {\r\n      setIsLoading(true);\r\n      try {\r\n        const history = await api.getChatHistory(agentId);\r\n        setMessages(history);\r\n      } catch (err) {\r\n        console.error(\"Failed to load history:\", err);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n    loadHistory();\r\n  }, [agentId]);\r\n\r\n  useEffect(() => {\r\n    if (scrollRef.current) {\r\n      scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\r\n    }\r\n  }, [messages]);\r\n  const handleSend = async () => {\r\n    if (!input.trim()) return;\r\n\r\n    const userMsg = { role: 'user', content: input };\r\n    setMessages(prev => [...prev, userMsg]);\r\n    setInput('');\r\n\r\n    try {\r\n      const data = await api.sendMessage(agentId, input);\r\n      setMessages(prev => [...prev, { role: 'assistant', content: data.content }]);\r\n    } catch (err) {\r\n      console.error(\"Error sending message:\", err);\r\n    }\r\n  };\r\n\r\n  if (isLoading) return <div className=\"flex-1 flex items-center justify-center text-zinc-500\">Loading conversation...</div>;\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full bg-zinc-900 rounded-xl border border-zinc-800 overflow-hidden\">\r\n      <div ref={scrollRef} className=\"flex-1 overflow-y-auto p-4 space-y-4\">\r\n        {messages.map((m, i) => (\r\n          <div key={i} className={`flex ${m.role === 'user' ? 'justify-end' : 'justify-start'}`}>\r\n            <div className={`max-w-[80%] p-3 rounded-2xl ${\r\n              m.role === 'user' ? 'bg-blue-600 text-white' : 'bg-zinc-800 text-zinc-100 border border-zinc-700'\r\n            }`}>\r\n              {m.content}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      \r\n      <div className=\"p-4 border-t border-zinc-800 flex gap-2\">\r\n        <input \r\n          className=\"flex-1 bg-zinc-800 border border-zinc-700 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 text-white\"\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          onKeyDown={(e) => e.key === 'Enter' && handleSend()}\r\n          placeholder=\"Type a message...\"\r\n        />\r\n        <button onClick={handleSend} className=\"bg-blue-600 px-6 py-2 rounded-lg font-medium\">Send</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AACA;AACA,0MAAkC,yBAAyB;;;AAF3D;;;AAIO,SAAS,cAAc,EAAE,OAAO,EAAuB;;IAC5D,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAQ,EAAE;IAClD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,YAAY,IAAA,uKAAM,EAAiB;IAEzC,IAAA,0KAAS;mCAAC;YACR,MAAM;uDAAc;oBAClB,aAAa;oBACb,IAAI;wBACF,MAAM,UAAU,MAAM,2HAAG,CAAC,cAAc,CAAC;wBACzC,YAAY;oBACd,EAAE,OAAO,KAAK;wBACZ,QAAQ,KAAK,CAAC,2BAA2B;oBAC3C,SAAU;wBACR,aAAa;oBACf;gBACF;;YACA;QACF;kCAAG;QAAC;KAAQ;IAEZ,IAAA,0KAAS;mCAAC;YACR,IAAI,UAAU,OAAO,EAAE;gBACrB,UAAU,OAAO,CAAC,SAAS,GAAG,UAAU,OAAO,CAAC,YAAY;YAC9D;QACF;kCAAG;QAAC;KAAS;IACb,MAAM,aAAa;QACjB,IAAI,CAAC,MAAM,IAAI,IAAI;QAEnB,MAAM,UAAU;YAAE,MAAM;YAAQ,SAAS;QAAM;QAC/C,YAAY,CAAA,OAAQ;mBAAI;gBAAM;aAAQ;QACtC,SAAS;QAET,IAAI;YACF,MAAM,OAAO,MAAM,2HAAG,CAAC,WAAW,CAAC,SAAS;YAC5C,YAAY,CAAA,OAAQ;uBAAI;oBAAM;wBAAE,MAAM;wBAAa,SAAS,KAAK,OAAO;oBAAC;iBAAE;QAC7E,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,0BAA0B;QAC1C;IACF;IAEA,IAAI,WAAW,qBAAO,6LAAC;QAAI,WAAU;kBAAwD;;;;;;IAE7F,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,KAAK;gBAAW,WAAU;0BAC5B,SAAS,GAAG,CAAC,CAAC,GAAG,kBAChB,6LAAC;wBAAY,WAAW,CAAC,KAAK,EAAE,EAAE,IAAI,KAAK,SAAS,gBAAgB,iBAAiB;kCACnF,cAAA,6LAAC;4BAAI,WAAW,CAAC,4BAA4B,EAC3C,EAAE,IAAI,KAAK,SAAS,2BAA2B,oDAC/C;sCACC,EAAE,OAAO;;;;;;uBAJJ;;;;;;;;;;0BAUd,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBACC,WAAU;wBACV,OAAO;wBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;wBACxC,WAAW,CAAC,IAAM,EAAE,GAAG,KAAK,WAAW;wBACvC,aAAY;;;;;;kCAEd,6LAAC;wBAAO,SAAS;wBAAY,WAAU;kCAA+C;;;;;;;;;;;;;;;;;;AAI9F;GArEgB;KAAA"}},
    {"offset": {"line": 156, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/OMAR/Desktop/ai-agent-control-center/frontend/app/lib/socket.tsx"],"sourcesContent":["import { io, Socket } from 'socket.io-client';\r\n\r\n// The URL should match your backend server address\r\nconst SOCKET_URL = process.env.NEXT_PUBLIC_BACKEND_URL || 'http://localhost:4000';\r\n\r\nexport const socket: Socket = io(SOCKET_URL, {\r\n  autoConnect: true,\r\n  reconnection: true,\r\n  reconnectionAttempts: 5,\r\n  // This helps prevent CORS issues during development\r\n  withCredentials: true,\r\n  transports: [\"websocket\"]\r\n});"],"names":[],"mappings":";;;;AAGmB;AAHnB;;AAEA,mDAAmD;AACnD,MAAM,aAAa,6DAAuC;AAEnD,MAAM,SAAiB,IAAA,wLAAE,EAAC,YAAY;IAC3C,aAAa;IACb,cAAc;IACd,sBAAsB;IACtB,oDAAoD;IACpD,iBAAiB;IACjB,YAAY;QAAC;KAAY;AAC3B"}},
    {"offset": {"line": 182, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/OMAR/Desktop/ai-agent-control-center/frontend/app/hooks/useSocketMetrics.ts"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { socket } from '../lib/socket';\r\n\r\nexport function useSocketMetrics() {\r\n    const [metrics, setMetrics] = useState({\r\n      latency: [] as any[],\r\n      tokens: [] as any[],\r\n      messages: [] as any[]\r\n    });\r\n    const [isLive, setIsLive] = useState(false);\r\n  \r\n    useEffect(() => {\r\n      const onConnect = () => setIsLive(true);\r\n      const onDisconnect = () => setIsLive(false);\r\n\r\n      const onTelemetry = (newPoint: any) => {\r\n        setMetrics((prev) => {\r\n          // Standardize the key: if type is 'token', use 'tokens'\r\n          let targetKey = newPoint.type === 'token' ? 'tokens' : (newPoint.type as keyof typeof metrics);\r\n          \r\n          // Debugging: Check if data is actually arriving\r\n          console.log(\"Incoming socket data:\", newPoint);\r\n      \r\n          if (!prev[targetKey]) {\r\n            console.warn(`Metric type \"${newPoint.type}\" not found in state keys.`);\r\n            return prev;\r\n          }\r\n      \r\n          return {\r\n            ...prev,\r\n            [targetKey]: [...prev[targetKey], {\r\n              ...newPoint,\r\n              // Ensure the chart finds a 'value' property if that's what dataKey expects\r\n              value: newPoint.value || newPoint.count || 0 \r\n            }].slice(-20)\r\n          };\r\n        });\r\n      };\r\n  \r\n      socket.on('connect', onConnect);\r\n      socket.on('disconnect', onDisconnect);\r\n      socket.on('telemetry_update', onTelemetry);\r\n  \r\n      return () => {\r\n        socket.off('connect', onConnect);\r\n        socket.off('disconnect', onDisconnect);\r\n        socket.off('telemetry_update', onTelemetry);\r\n      };\r\n    }, []);\r\n  \r\n    return { metrics, isLive };\r\n  }"],"names":[],"mappings":";;;;AAAA;AACA;;;;AAEO,SAAS;;IACZ,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;QACrC,SAAS,EAAE;QACX,QAAQ,EAAE;QACV,UAAU,EAAE;IACd;IACA,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IAErC,IAAA,0KAAS;sCAAC;YACR,MAAM;wDAAY,IAAM,UAAU;;YAClC,MAAM;2DAAe,IAAM,UAAU;;YAErC,MAAM;0DAAc,CAAC;oBACnB;kEAAW,CAAC;4BACV,wDAAwD;4BACxD,IAAI,YAAY,SAAS,IAAI,KAAK,UAAU,WAAY,SAAS,IAAI;4BAErE,gDAAgD;4BAChD,QAAQ,GAAG,CAAC,yBAAyB;4BAErC,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;gCACpB,QAAQ,IAAI,CAAC,CAAC,aAAa,EAAE,SAAS,IAAI,CAAC,0BAA0B,CAAC;gCACtE,OAAO;4BACT;4BAEA,OAAO;gCACL,GAAG,IAAI;gCACP,CAAC,UAAU,EAAE;uCAAI,IAAI,CAAC,UAAU;oCAAE;wCAChC,GAAG,QAAQ;wCACX,2EAA2E;wCAC3E,OAAO,SAAS,KAAK,IAAI,SAAS,KAAK,IAAI;oCAC7C;iCAAE,CAAC,KAAK,CAAC,CAAC;4BACZ;wBACF;;gBACF;;YAEA,kIAAM,CAAC,EAAE,CAAC,WAAW;YACrB,kIAAM,CAAC,EAAE,CAAC,cAAc;YACxB,kIAAM,CAAC,EAAE,CAAC,oBAAoB;YAE9B;8CAAO;oBACL,kIAAM,CAAC,GAAG,CAAC,WAAW;oBACtB,kIAAM,CAAC,GAAG,CAAC,cAAc;oBACzB,kIAAM,CAAC,GAAG,CAAC,oBAAoB;gBACjC;;QACF;qCAAG,EAAE;IAEL,OAAO;QAAE;QAAS;IAAO;AAC3B;GAhDc"}},
    {"offset": {"line": 259, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/OMAR/Desktop/ai-agent-control-center/frontend/app/components/MetricsDashboard.tsx"],"sourcesContent":["// frontend/src/components/MetricsDashboard.tsx\r\nimport { LineChart, Line, XAxis, YAxis, Tooltip, ResponsiveContainer } from 'recharts';\r\n\r\n// Define the interface for the props\r\ninterface MetricsProps {\r\n  data: any[]; // This will come from useSocketMetrics()\r\n}\r\ninterface MetricsProps {\r\n  title: string;\r\n  data: any[];\r\n  dataKey: string;\r\n  color: string;\r\n}\r\n\r\nexport function MetricsDashboard({ title, data, color, dataKey }: MetricsProps) {\r\n  return (\r\n    <div className=\"bg-zinc-900 p-4 rounded-xl border border-zinc-800 h-[200px] flex flex-col\">\r\n      <h3 className=\"text-zinc-500 text-xs font-bold mb-4 uppercase\">{title}</h3>\r\n      <div className=\"flex-1 w-full min-h-0\"> {/* min-h-0 is key for flex containers */}\r\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n          <LineChart data={data}>\r\n             <Line type=\"monotone\" dataKey={dataKey} stroke={color} dot={false} />\r\n          </LineChart>\r\n        </ResponsiveContainer>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAAA,+CAA+C;AAC/C;AAAA;AAAA;;;AAaO,SAAS,iBAAiB,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAgB;IAC5E,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAAkD;;;;;;0BAChE,6LAAC;gBAAI,WAAU;;oBAAwB;kCACrC,6LAAC,6LAAmB;wBAAC,OAAM;wBAAO,QAAO;kCACvC,cAAA,6LAAC,qKAAS;4BAAC,MAAM;sCACd,cAAA,6LAAC,+JAAI;gCAAC,MAAK;gCAAW,SAAS;gCAAS,QAAQ;gCAAO,KAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMzE;KAbgB"}},
    {"offset": {"line": 334, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/OMAR/Desktop/ai-agent-control-center/frontend/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useParams } from \"next/navigation\";\nimport { ChevronLeft } from \"lucide-react\";\nimport Link from \"next/link\";\nimport { ChatInterface } from \"./components/ChatInterface\";\nimport { useSocketMetrics } from \"./hooks/useSocketMetrics\";\nimport { MetricsDashboard } from \"./components/MetricsDashboard\";\n\nexport default function AgentChatPage() {\n  const params = useParams();\n  const agentId = params.agentId as string;\n  const { metrics, isLive } = useSocketMetrics();\n\n  return (\n    <div className=\"flex flex-col h-full p-6 bg-red\">\n      <Link href=\"/\" className=\"flex items-center gap-2 text-zinc-500 hover:text-white mb-4 transition-colors text-sm\">\n        <ChevronLeft size={16} /> Back to Dashboard\n      </Link>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6 h-[85vh]\">\n        {/* Chat Area */}\n        <div className=\"lg:col-span-3 h-full\">\n          <ChatInterface agentId={agentId} />\n        </div>\n\n        {/* Local Metrics */}\n        <div className=\"flex flex-col gap-4\">\n          <h3 className=\"text-xs font-bold text-zinc-500 uppercase tracking-widest\">Agent Performance</h3>\n          <MetricsDashboard title=\"Latency\" data={metrics.latency} color=\"#10b981\" dataKey=\"value\" />\n          <MetricsDashboard title=\"Tokens\" data={metrics.tokens} color=\"#3b82f6\" dataKey=\"value\" />\n          \n          <div className=\"mt-auto p-4 bg-zinc-900/50 border border-zinc-800 rounded-xl\">\n             <p className=\"text-[10px] text-zinc-500 uppercase font-bold mb-1\">Connection State</p>\n             <div className=\"flex items-center gap-2\">\n                <div className={`h-2 w-2 rounded-full ${isLive ? 'bg-green-500' : 'bg-red-500'}`} />\n                <span className=\"text-xs text-zinc-300\">{isLive ? 'Healthy' : 'Handshaking...'}</span>\n             </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAPA;;;;;;;AASe,SAAS;;IACtB,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,UAAU,OAAO,OAAO;IAC9B,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,GAAG,IAAA,uJAAgB;IAE5C,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,0KAAI;gBAAC,MAAK;gBAAI,WAAU;;kCACvB,6LAAC,sOAAW;wBAAC,MAAM;;;;;;oBAAM;;;;;;;0BAG3B,6LAAC;gBAAI,WAAU;;kCAEb,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC,uJAAa;4BAAC,SAAS;;;;;;;;;;;kCAI1B,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAA4D;;;;;;0CAC1E,6LAAC,6JAAgB;gCAAC,OAAM;gCAAU,MAAM,QAAQ,OAAO;gCAAE,OAAM;gCAAU,SAAQ;;;;;;0CACjF,6LAAC,6JAAgB;gCAAC,OAAM;gCAAS,MAAM,QAAQ,MAAM;gCAAE,OAAM;gCAAU,SAAQ;;;;;;0CAE/E,6LAAC;gCAAI,WAAU;;kDACZ,6LAAC;wCAAE,WAAU;kDAAqD;;;;;;kDAClE,6LAAC;wCAAI,WAAU;;0DACZ,6LAAC;gDAAI,WAAW,CAAC,qBAAqB,EAAE,SAAS,iBAAiB,cAAc;;;;;;0DAChF,6LAAC;gDAAK,WAAU;0DAAyB,SAAS,YAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO9E;GAlCwB;;QACP,kJAAS;QAEI,uJAAgB;;;KAHtB"}}]
}