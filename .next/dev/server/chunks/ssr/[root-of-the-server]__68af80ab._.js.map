{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/OMAR/Desktop/ai-agent-control-center/frontend/app/components/ChatInterface.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport { api } from \"../lib/api\"; // Centralized API client\r\n\r\nexport function ChatInterface({ agentId }: { agentId: string }) {\r\n  const [messages, setMessages] = useState<any[]>([]);\r\n  const [input, setInput] = useState('');\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const scrollRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    const loadHistory = async () => {\r\n      setIsLoading(true);\r\n      try {\r\n        const history = await api.getChatHistory(agentId);\r\n        setMessages(history);\r\n      } catch (err) {\r\n        console.error(\"Failed to load history:\", err);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n    loadHistory();\r\n  }, [agentId]);\r\n\r\n  useEffect(() => {\r\n    if (scrollRef.current) {\r\n      scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\r\n    }\r\n  }, [messages]);\r\n  const handleSend = async () => {\r\n    if (!input.trim()) return;\r\n\r\n    const userMsg = { role: 'user', content: input };\r\n    setMessages(prev => [...prev, userMsg]);\r\n    setInput('');\r\n\r\n    try {\r\n      const data = await api.sendMessage(agentId, input);\r\n      setMessages(prev => [...prev, { role: 'assistant', content: data.content }]);\r\n    } catch (err) {\r\n      console.error(\"Error sending message:\", err);\r\n    }\r\n  };\r\n\r\n  if (isLoading) return <div className=\"flex-1 flex items-center justify-center text-zinc-500\">Loading conversation...</div>;\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full bg-zinc-900 rounded-xl border border-zinc-800 overflow-hidden\">\r\n      <div ref={scrollRef} className=\"flex-1 overflow-y-auto p-4 space-y-4\">\r\n        {messages.map((m, i) => (\r\n          <div key={i} className={`flex ${m.role === 'user' ? 'justify-end' : 'justify-start'}`}>\r\n            <div className={`max-w-[80%] p-3 rounded-2xl ${\r\n              m.role === 'user' ? 'bg-blue-600 text-white' : 'bg-zinc-800 text-zinc-100 border border-zinc-700'\r\n            }`}>\r\n              {m.content}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      \r\n      <div className=\"p-4 border-t border-zinc-800 flex gap-2\">\r\n        <input \r\n          className=\"flex-1 bg-zinc-800 border border-zinc-700 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 text-white\"\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          onKeyDown={(e) => e.key === 'Enter' && handleSend()}\r\n          placeholder=\"Type a message...\"\r\n        />\r\n        <button onClick={handleSend} className=\"bg-blue-600 px-6 py-2 rounded-lg font-medium\">Send</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AACA;AACA,oMAAkC,yBAAyB;AAF3D;;;;AAIO,SAAS,cAAc,EAAE,OAAO,EAAuB;IAC5D,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAQ,EAAE;IAClD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,YAAY,IAAA,+MAAM,EAAiB;IAEzC,IAAA,kNAAS,EAAC;QACR,MAAM,cAAc;YAClB,aAAa;YACb,IAAI;gBACF,MAAM,UAAU,MAAM,wHAAG,CAAC,cAAc,CAAC;gBACzC,YAAY;YACd,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,2BAA2B;YAC3C,SAAU;gBACR,aAAa;YACf;QACF;QACA;IACF,GAAG;QAAC;KAAQ;IAEZ,IAAA,kNAAS,EAAC;QACR,IAAI,UAAU,OAAO,EAAE;YACrB,UAAU,OAAO,CAAC,SAAS,GAAG,UAAU,OAAO,CAAC,YAAY;QAC9D;IACF,GAAG;QAAC;KAAS;IACb,MAAM,aAAa;QACjB,IAAI,CAAC,MAAM,IAAI,IAAI;QAEnB,MAAM,UAAU;YAAE,MAAM;YAAQ,SAAS;QAAM;QAC/C,YAAY,CAAA,OAAQ;mBAAI;gBAAM;aAAQ;QACtC,SAAS;QAET,IAAI;YACF,MAAM,OAAO,MAAM,wHAAG,CAAC,WAAW,CAAC,SAAS;YAC5C,YAAY,CAAA,OAAQ;uBAAI;oBAAM;wBAAE,MAAM;wBAAa,SAAS,KAAK,OAAO;oBAAC;iBAAE;QAC7E,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,0BAA0B;QAC1C;IACF;IAEA,IAAI,WAAW,qBAAO,8OAAC;QAAI,WAAU;kBAAwD;;;;;;IAE7F,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,KAAK;gBAAW,WAAU;0BAC5B,SAAS,GAAG,CAAC,CAAC,GAAG,kBAChB,8OAAC;wBAAY,WAAW,CAAC,KAAK,EAAE,EAAE,IAAI,KAAK,SAAS,gBAAgB,iBAAiB;kCACnF,cAAA,8OAAC;4BAAI,WAAW,CAAC,4BAA4B,EAC3C,EAAE,IAAI,KAAK,SAAS,2BAA2B,oDAC/C;sCACC,EAAE,OAAO;;;;;;uBAJJ;;;;;;;;;;0BAUd,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,WAAU;wBACV,OAAO;wBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;wBACxC,WAAW,CAAC,IAAM,EAAE,GAAG,KAAK,WAAW;wBACvC,aAAY;;;;;;kCAEd,8OAAC;wBAAO,SAAS;wBAAY,WAAU;kCAA+C;;;;;;;;;;;;;;;;;;AAI9F"}},
    {"offset": {"line": 141, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/OMAR/Desktop/ai-agent-control-center/frontend/app/components/MetricsDashboard.tsx"],"sourcesContent":["// frontend/src/components/MetricsDashboard.tsx\r\nimport { LineChart, Line, XAxis, YAxis, Tooltip, ResponsiveContainer } from 'recharts';\r\n\r\n// Define the interface for the props\r\ninterface MetricsProps {\r\n  data: any[]; // This will come from useSocketMetrics()\r\n}\r\ninterface MetricsProps {\r\n  title: string;\r\n  data: any[];\r\n  dataKey: string;\r\n  color: string;\r\n}\r\n\r\nexport function MetricsDashboard({ title, data, color, dataKey }: MetricsProps) {\r\n  return (\r\n    <div className=\"bg-zinc-900 p-4 rounded-xl border border-zinc-800 h-[200px] flex flex-col\">\r\n      <h3 className=\"text-zinc-500 text-xs font-bold mb-4 uppercase\">{title}</h3>\r\n      <div className=\"flex-1 w-full min-h-0\"> {/* min-h-0 is key for flex containers */}\r\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n          <LineChart data={data}>\r\n             <Line type=\"monotone\" dataKey={dataKey} stroke={color} dot={false} />\r\n          </LineChart>\r\n        </ResponsiveContainer>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAAA,+CAA+C;AAC/C;AAAA;AAAA;;;AAaO,SAAS,iBAAiB,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAgB;IAC5E,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAkD;;;;;;0BAChE,8OAAC;gBAAI,WAAU;;oBAAwB;kCACrC,8OAAC,0LAAmB;wBAAC,OAAM;wBAAO,QAAO;kCACvC,cAAA,8OAAC,kKAAS;4BAAC,MAAM;sCACd,cAAA,8OAAC,4JAAI;gCAAC,MAAK;gCAAW,SAAS;gCAAS,QAAQ;gCAAO,KAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMzE"}},
    {"offset": {"line": 300, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/OMAR/Desktop/ai-agent-control-center/frontend/app/lib/socket.tsx"],"sourcesContent":["import { io, Socket } from 'socket.io-client';\r\n\r\n// The URL should match your backend server address\r\nconst SOCKET_URL = process.env.NEXT_PUBLIC_BACKEND_URL || 'http://localhost:4000';\r\n\r\nexport const socket: Socket = io(SOCKET_URL, {\r\n  autoConnect: true,\r\n  reconnection: true,\r\n  reconnectionAttempts: 5,\r\n  // This helps prevent CORS issues during development\r\n  withCredentials: true,\r\n  transports: [\"websocket\"]\r\n});"],"names":[],"mappings":";;;;AAAA;;AAEA,mDAAmD;AACnD,MAAM,aAAa,6DAAuC;AAEnD,MAAM,SAAiB,IAAA,8LAAE,EAAC,YAAY;IAC3C,aAAa;IACb,cAAc;IACd,sBAAsB;IACtB,oDAAoD;IACpD,iBAAiB;IACjB,YAAY;QAAC;KAAY;AAC3B"}},
    {"offset": {"line": 322, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/OMAR/Desktop/ai-agent-control-center/frontend/app/hooks/useSocketMetrics.ts"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { socket } from '../lib/socket';\r\n\r\nexport function useSocketMetrics() {\r\n    const [metrics, setMetrics] = useState({\r\n      latency: [] as any[],\r\n      tokens: [] as any[],\r\n      messages: [] as any[]\r\n    });\r\n    const [isLive, setIsLive] = useState(false);\r\n  \r\n    useEffect(() => {\r\n      const onConnect = () => setIsLive(true);\r\n      const onDisconnect = () => setIsLive(false);\r\n\r\n      const onTelemetry = (newPoint: any) => {\r\n        setMetrics((prev) => {\r\n          // Standardize the key: if type is 'token', use 'tokens'\r\n          let targetKey = newPoint.type === 'token' ? 'tokens' : (newPoint.type as keyof typeof metrics);\r\n          \r\n          // Debugging: Check if data is actually arriving\r\n          console.log(\"Incoming socket data:\", newPoint);\r\n      \r\n          if (!prev[targetKey]) {\r\n            console.warn(`Metric type \"${newPoint.type}\" not found in state keys.`);\r\n            return prev;\r\n          }\r\n      \r\n          return {\r\n            ...prev,\r\n            [targetKey]: [...prev[targetKey], {\r\n              ...newPoint,\r\n              // Ensure the chart finds a 'value' property if that's what dataKey expects\r\n              value: newPoint.value || newPoint.count || 0 \r\n            }].slice(-20)\r\n          };\r\n        });\r\n      };\r\n  \r\n      socket.on('connect', onConnect);\r\n      socket.on('disconnect', onDisconnect);\r\n      socket.on('telemetry_update', onTelemetry);\r\n  \r\n      return () => {\r\n        socket.off('connect', onConnect);\r\n        socket.off('disconnect', onDisconnect);\r\n        socket.off('telemetry_update', onTelemetry);\r\n      };\r\n    }, []);\r\n  \r\n    return { metrics, isLive };\r\n  }"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS;IACZ,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;QACrC,SAAS,EAAE;QACX,QAAQ,EAAE;QACV,UAAU,EAAE;IACd;IACA,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IAErC,IAAA,kNAAS,EAAC;QACR,MAAM,YAAY,IAAM,UAAU;QAClC,MAAM,eAAe,IAAM,UAAU;QAErC,MAAM,cAAc,CAAC;YACnB,WAAW,CAAC;gBACV,wDAAwD;gBACxD,IAAI,YAAY,SAAS,IAAI,KAAK,UAAU,WAAY,SAAS,IAAI;gBAErE,gDAAgD;gBAChD,QAAQ,GAAG,CAAC,yBAAyB;gBAErC,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;oBACpB,QAAQ,IAAI,CAAC,CAAC,aAAa,EAAE,SAAS,IAAI,CAAC,0BAA0B,CAAC;oBACtE,OAAO;gBACT;gBAEA,OAAO;oBACL,GAAG,IAAI;oBACP,CAAC,UAAU,EAAE;2BAAI,IAAI,CAAC,UAAU;wBAAE;4BAChC,GAAG,QAAQ;4BACX,2EAA2E;4BAC3E,OAAO,SAAS,KAAK,IAAI,SAAS,KAAK,IAAI;wBAC7C;qBAAE,CAAC,KAAK,CAAC,CAAC;gBACZ;YACF;QACF;QAEA,+HAAM,CAAC,EAAE,CAAC,WAAW;QACrB,+HAAM,CAAC,EAAE,CAAC,cAAc;QACxB,+HAAM,CAAC,EAAE,CAAC,oBAAoB;QAE9B,OAAO;YACL,+HAAM,CAAC,GAAG,CAAC,WAAW;YACtB,+HAAM,CAAC,GAAG,CAAC,cAAc;YACzB,+HAAM,CAAC,GAAG,CAAC,oBAAoB;QACjC;IACF,GAAG,EAAE;IAEL,OAAO;QAAE;QAAS;IAAO;AAC3B"}},
    {"offset": {"line": 381, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/OMAR/Desktop/ai-agent-control-center/frontend/app/chat/%5BagentId%5D/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useParams } from \"next/navigation\";\r\nimport { ChatInterface } from \"../../components/ChatInterface\";\r\nimport { MetricsDashboard } from \"../../components/MetricsDashboard\";\r\nimport { useSocketMetrics } from \"../../hooks/useSocketMetrics\";\r\n\r\nexport default function DynamicChatPage() {\r\n  const params = useParams();\r\n  const agentId = params.agentId as string;\r\n  const { metrics } = useSocketMetrics();\r\n\r\n  \r\n  return (\r\n    <div className=\"h-full flex flex-col p-6 gap-6\">\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6 h-full\">\r\n        {/* Chat window takes most of the screen */}\r\n        <div className=\"lg:col-span-3 h-[85vh]\">\r\n          <ChatInterface agentId={agentId} />\r\n        </div>\r\n\r\n        {/* Analytics on the side */}\r\n        <div className=\"flex flex-col gap-4\">\r\n          <MetricsDashboard \r\n            title=\"Live Latency\" \r\n            data={metrics.latency} \r\n            color=\"#10b981\"\r\n            dataKey=\"value\"\r\n            />\r\n          <MetricsDashboard \r\n            title=\"Token Usage\" \r\n            data={metrics.tokens} \r\n            color=\"#10b981\" \r\n            dataKey=\"value\"\r\n            />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,UAAU,OAAO,OAAO;IAC9B,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,oJAAgB;IAGpC,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BAEb,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,oJAAa;wBAAC,SAAS;;;;;;;;;;;8BAI1B,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,0JAAgB;4BACf,OAAM;4BACN,MAAM,QAAQ,OAAO;4BACrB,OAAM;4BACN,SAAQ;;;;;;sCAEV,8OAAC,0JAAgB;4BACf,OAAM;4BACN,MAAM,QAAQ,MAAM;4BACpB,OAAM;4BACN,SAAQ;;;;;;;;;;;;;;;;;;;;;;;AAMpB"}}]
}