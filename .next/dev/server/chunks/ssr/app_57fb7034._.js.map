{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/OMAR/Desktop/ai-agent-control-center/frontend/app/components/ChatInterface.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect } from 'react';\r\nimport { api } from \"../lib/api\"; // Use your api helper\r\n\r\ninterface Message {\r\n  role: 'user' | 'assistant' | 'system';\r\n  content: string;\r\n}\r\n\r\nexport function ChatInterface({ agentId }: { agentId: string }) {\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const [input, setInput] = useState('');\r\n  const [isTyping, setIsTyping] = useState(false);\r\n  const [agentName, setAgentName] = useState(\"Agent\");\r\n\r\n  // Optional: Fetch agent name to show in the placeholder\r\n  useEffect(() => {\r\n    fetch(`http://localhost:4000/api/agents`)\r\n      .then(res => res.json())\r\n      .then(agents => {\r\n        const current = agents.find((a: any) => a.id === agentId);\r\n        if (current) setAgentName(current.name);\r\n      });\r\n  }, [agentId]);\r\n\r\n  const sendMessage = async () => {\r\n    if (!input.trim()) return;\r\n\r\n    const userMsg: Message = { role: 'user', content: input };\r\n    setMessages(prev => [...prev, userMsg]);\r\n    setInput('');\r\n    setIsTyping(true);\r\n\r\n    try {\r\n      const res = await fetch('http://localhost:4000/api/chat', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ \r\n          agentId: agentId, // Pass ID instead of config object\r\n          message: input \r\n        })\r\n      });\r\n\r\n      const data = await res.json();\r\n      const assistantMsg: Message = { role: 'assistant', content: data.content };\r\n      setMessages(prev => [...prev, assistantMsg]);\r\n    } catch (err) {\r\n      console.error(\"Failed to send\", err);\r\n    } finally {\r\n      setIsTyping(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full bg-zinc-900 rounded-xl border border-zinc-800 overflow-hidden\">\r\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\r\n        {messages.map((m, i) => (\r\n          <div key={i} className={`flex ${m.role === 'user' ? 'justify-end' : 'justify-start'}`}>\r\n            <div className={`max-w-[80%] p-3 rounded-2xl ${\r\n              m.role === 'user' ? 'bg-blue-600 text-white' : 'bg-zinc-800 text-zinc-100 border border-zinc-700'\r\n            }`}>\r\n              {m.content}\r\n            </div>\r\n          </div>\r\n        ))}\r\n        {isTyping && <div className=\"text-xs text-zinc-500 animate-pulse px-2\">Agent is thinking...</div>}\r\n      </div>\r\n      \r\n      <div className=\"p-4 border-t border-zinc-800 bg-zinc-900/50 flex gap-2\">\r\n        <input \r\n          className=\"flex-1 bg-zinc-800 border border-zinc-700 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 text-white\"\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          onKeyDown={(e) => e.key === 'Enter' && sendMessage()}\r\n          placeholder={`Message ${agentName}...`}\r\n        />\r\n        <button onClick={sendMessage} className=\"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium transition-colors\">\r\n          Send\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AACA;AADA;;;AASO,SAAS,cAAc,EAAE,OAAO,EAAuB;IAC5D,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAY,EAAE;IACtD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAE3C,wDAAwD;IACxD,IAAA,kNAAS,EAAC;QACR,MAAM,CAAC,gCAAgC,CAAC,EACrC,IAAI,CAAC,CAAA,MAAO,IAAI,IAAI,IACpB,IAAI,CAAC,CAAA;YACJ,MAAM,UAAU,OAAO,IAAI,CAAC,CAAC,IAAW,EAAE,EAAE,KAAK;YACjD,IAAI,SAAS,aAAa,QAAQ,IAAI;QACxC;IACJ,GAAG;QAAC;KAAQ;IAEZ,MAAM,cAAc;QAClB,IAAI,CAAC,MAAM,IAAI,IAAI;QAEnB,MAAM,UAAmB;YAAE,MAAM;YAAQ,SAAS;QAAM;QACxD,YAAY,CAAA,OAAQ;mBAAI;gBAAM;aAAQ;QACtC,SAAS;QACT,YAAY;QAEZ,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,kCAAkC;gBACxD,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACnB,SAAS;oBACT,SAAS;gBACX;YACF;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,MAAM,eAAwB;gBAAE,MAAM;gBAAa,SAAS,KAAK,OAAO;YAAC;YACzE,YAAY,CAAA,OAAQ;uBAAI;oBAAM;iBAAa;QAC7C,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,kBAAkB;QAClC,SAAU;YACR,YAAY;QACd;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;oBACZ,SAAS,GAAG,CAAC,CAAC,GAAG,kBAChB,8OAAC;4BAAY,WAAW,CAAC,KAAK,EAAE,EAAE,IAAI,KAAK,SAAS,gBAAgB,iBAAiB;sCACnF,cAAA,8OAAC;gCAAI,WAAW,CAAC,4BAA4B,EAC3C,EAAE,IAAI,KAAK,SAAS,2BAA2B,oDAC/C;0CACC,EAAE,OAAO;;;;;;2BAJJ;;;;;oBAQX,0BAAY,8OAAC;wBAAI,WAAU;kCAA2C;;;;;;;;;;;;0BAGzE,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,WAAU;wBACV,OAAO;wBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;wBACxC,WAAW,CAAC,IAAM,EAAE,GAAG,KAAK,WAAW;wBACvC,aAAa,CAAC,QAAQ,EAAE,UAAU,GAAG,CAAC;;;;;;kCAExC,8OAAC;wBAAO,SAAS;wBAAa,WAAU;kCAA8F;;;;;;;;;;;;;;;;;;AAM9I"}},
    {"offset": {"line": 140, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/OMAR/Desktop/ai-agent-control-center/frontend/app/components/MetricsDashboard.tsx"],"sourcesContent":["// frontend/src/components/MetricsDashboard.tsx\r\nimport { LineChart, Line, XAxis, YAxis, Tooltip, ResponsiveContainer } from 'recharts';\r\n\r\n// Define the interface for the props\r\ninterface MetricsProps {\r\n  data: any[]; // This will come from useSocketMetrics()\r\n}\r\ninterface MetricsProps {\r\n  title: string;\r\n  data: any[];\r\n  dataKey: string;\r\n  color: string;\r\n}\r\n\r\nexport function MetricsDashboard({ title, data, dataKey, color }: MetricsProps) {\r\n  return (\r\n    <div className=\"bg-slate-900 p-4 rounded-xl border border-slate-800\">\r\n      <h3 className=\"text-slate-400 text-xs font-bold mb-3\">{title}</h3>\r\n      <div className=\"h-32 w-full\">\r\n        <ResponsiveContainer>\r\n          <LineChart data={data}>\r\n            <Line \r\n              type=\"monotone\" \r\n              dataKey={dataKey} \r\n              stroke={color} \r\n              dot={false} \r\n              isAnimationActive={false} \r\n            />\r\n          </LineChart>\r\n        </ResponsiveContainer>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAAA,+CAA+C;AAC/C;AAAA;AAAA;;;AAaO,SAAS,iBAAiB,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAgB;IAC5E,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAyC;;;;;;0BACvD,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,0LAAmB;8BAClB,cAAA,8OAAC,kKAAS;wBAAC,MAAM;kCACf,cAAA,8OAAC,4JAAI;4BACH,MAAK;4BACL,SAAS;4BACT,QAAQ;4BACR,KAAK;4BACL,mBAAmB;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOjC"}},
    {"offset": {"line": 205, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/OMAR/Desktop/ai-agent-control-center/frontend/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useParams } from \"next/navigation\";\nimport { ChevronLeft } from \"lucide-react\";\nimport Link from \"next/link\";\nimport { ChatInterface } from \"./components/ChatInterface\";\nimport { useSocketMetrics } from \"./hooks/useSocketMetrics\";\nimport { MetricsDashboard } from \"./components/MetricsDashboard\";\n\nexport default function AgentChatPage() {\n  const params = useParams();\n  const agentId = params.agentId as string;\n  const { metrics, isLive } = useSocketMetricss();\n\n  return (\n    <div className=\"flex flex-col h-full p-6\">\n      <Link href=\"/\" className=\"flex items-center gap-2 text-zinc-500 hover:text-white mb-4 transition-colors text-sm\">\n        <ChevronLeft size={16} /> Back to Dashboard\n      </Link>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6 h-[85vh]\">\n        {/* Chat Area */}\n        <div className=\"lg:col-span-3 h-full\">\n          <ChatInterface agentId={agentId} />\n        </div>\n\n        {/* Local Metrics */}\n        <div className=\"flex flex-col gap-4\">\n          <h3 className=\"text-xs font-bold text-zinc-500 uppercase tracking-widest\">Agent Performance</h3>\n          <MetricsDashboard title=\"Latency\" data={metrics.latency} color=\"#10b981\" dataKey=\"value\" />\n          <MetricsDashboard title=\"Tokens\" data={metrics.tokens} color=\"#3b82f6\" dataKey=\"value\" />\n          \n          <div className=\"mt-auto p-4 bg-zinc-900/50 border border-zinc-800 rounded-xl\">\n             <p className=\"text-[10px] text-zinc-500 uppercase font-bold mb-1\">Connection State</p>\n             <div className=\"flex items-center gap-2\">\n                <div className={`h-2 w-2 rounded-full ${isLive ? 'bg-green-500' : 'bg-red-500'}`} />\n                <span className=\"text-xs text-zinc-300\">{isLive ? 'Healthy' : 'Handshaking...'}</span>\n             </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAEA;AAPA;;;;;;;AASe,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,UAAU,OAAO,OAAO;IAC9B,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,GAAG;IAE5B,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,uKAAI;gBAAC,MAAK;gBAAI,WAAU;;kCACvB,8OAAC,mOAAW;wBAAC,MAAM;;;;;;oBAAM;;;;;;;0BAG3B,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,oJAAa;4BAAC,SAAS;;;;;;;;;;;kCAI1B,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;0CAA4D;;;;;;0CAC1E,8OAAC,0JAAgB;gCAAC,OAAM;gCAAU,MAAM,QAAQ,OAAO;gCAAE,OAAM;gCAAU,SAAQ;;;;;;0CACjF,8OAAC,0JAAgB;gCAAC,OAAM;gCAAS,MAAM,QAAQ,MAAM;gCAAE,OAAM;gCAAU,SAAQ;;;;;;0CAE/E,8OAAC;gCAAI,WAAU;;kDACZ,8OAAC;wCAAE,WAAU;kDAAqD;;;;;;kDAClE,8OAAC;wCAAI,WAAU;;0DACZ,8OAAC;gDAAI,WAAW,CAAC,qBAAqB,EAAE,SAAS,iBAAiB,cAAc;;;;;;0DAChF,8OAAC;gDAAK,WAAU;0DAAyB,SAAS,YAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO9E"}}]
}